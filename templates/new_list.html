{% extends 'base.html' %}
{% block title %}
List page
{% endblock %}
{% block content %}

<style>
  .container {
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    height: 100vh;
  }

  .table td,
  .table th {
    border: 1px solid white;
  }

  .mark-square {
    width: 30px;
    height: 30px;
    cursor: pointer;
    background-color: rgb(255, 255, 255);
    border-radius: 4px;
  }

  .marked td {
    position: relative;
  }

  .marked td::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 2px;
    background-color:  #343a40;
    transform: translateY(-50%);
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const tableBody = document.querySelector(".table tbody");

    tableBody.addEventListener("click", function (event) {
      if (event.target.classList.contains("mark-square")) {
        const row = event.target.closest("tr");
        row.classList.toggle("marked");
      }
    });

    const container = document.querySelector(".container");

    container.addEventListener("keydown", function (event) {
      if (event.key === "Enter" && event.target.classList.contains("data-input")) {
        event.preventDefault();
        const newRow = document.createElement("tr");
        newRow.innerHTML = `
          <td><input class="data-input" type="text"></td>
          <td><input class="data-input" type="text"></td>
          <td><div class="mark-square"></div></td>
        `;
        tableBody.appendChild(newRow);
        newRow.querySelector(".data-input").focus();
      }
    });
  });
</script>

<div class="container">
  <table class="table table-bordered table-dark">
    <thead>
      <tr>
        <th>Item</th>
        <th>Quantity</th>
        <th>MARK</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.item }}</td>
        <td>{{ item.quantity }}</td>
        <td>
          <div class="mark-square"></div>
        </td>
      </tr>
      {% endfor %}
      <tr>
        <td><input class="data-input" type="text" name="item"></td>
        <td><input class="data-input" type="text" name="quantity"></td>
        <td>
          <div class="mark-square"></div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<style>
  body {
    background-color: #212121;
    color: white;
  }

  .container {
    width: 60%;
    margin-top: 50px;
  }

  .table td,
  .table th {
    border: 1px solid white;
  }

  .marked {
    background-color: #343a40;
  }
</style>

{% endblock %}
